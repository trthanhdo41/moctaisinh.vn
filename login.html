<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Đăng nhập Admin</title>
  <link href="css/bootstrap.min.css" rel="stylesheet">
  <link href="css/style.css" rel="stylesheet">
  <style>
    body{display:flex;align-items:center;justify-content:center;min-height:100vh;background:#f5f7fb}
    .login-card{width:100%;max-width:380px;background:#fff;border-radius:12px;padding:24px;box-shadow:0 10px 30px rgba(0,0,0,.08)}
  </style>
  <script>const API_BASE='http://localhost:8080';</script>
</head>
<body>
  <div class="login-card">
    <h5 class="mb-3">Đăng nhập Admin</h5>
    <div class="mb-3">
      <label class="form-label">Tài khoản</label>
      <input id="loginUser" type="text" class="form-control" placeholder="Nhập tài khoản">
    </div>
    <div class="mb-3">
      <label class="form-label">Mật khẩu</label>
      <input id="loginPass" type="password" class="form-control" placeholder="Nhập mật khẩu">
    </div>
    <div class="d-flex gap-2">
      <button id="btnLogin" class="btn btn-primary w-100">Đăng nhập</button>
    </div>
    <div id="loginMsg" class="mt-3 text-danger" style="display:none"></div>
  </div>

  <script src="js/bootstrap.bundle.min.js"></script>
  <script>
    document.getElementById('btnLogin').onclick = async function(){
      const u=document.getElementById('loginUser').value.trim();
      const p=document.getElementById('loginPass').value.trim();
      const msg=document.getElementById('loginMsg');
      msg.style.display='none';
      try{
        const res=await fetch(`${API_BASE}/api/auth/login?username=${encodeURIComponent(u)}&password=${encodeURIComponent(p)}`,{method:'POST'});
        if(res.ok){
          localStorage.setItem('mts_admin_logged_in','true');
          window.location.href='admin.html';
        }else{
          msg.textContent='Sai tài khoản hoặc mật khẩu';
          msg.style.display='block';
        }
      }catch(e){
        msg.textContent='Không thể kết nối máy chủ';
        msg.style.display='block';
      }
    }
  </script>
</body>
</html>

