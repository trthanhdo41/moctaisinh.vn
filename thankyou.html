<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="author" content="Mộc Tái Sinh">
  <link rel="shortcut icon" href="favicon.png">
  <meta name="description" content="Cảm ơn bạn đã đặt hàng sản phẩm gỗ tái sinh. Chúng tôi sẽ giao hàng sớm nhất. Đồ gỗ thủ công chất lượng cao.">
  <meta name="keywords" content="đặt hàng thành công, gỗ tái sinh, đồ gỗ thủ công">
  <!-- SEO Meta Tags -->
  <meta name="robots" content="index, follow">
  <meta name="googlebot" content="index, follow">
  <meta property="og:title" content="Cảm Ơn | Đặt Hàng Thành Công - Mộc Tái Sinh">
  <meta property="og:description" content="Cảm ơn bạn đã đặt hàng sản phẩm gỗ tái sinh. Chúng tôi sẽ giao hàng sớm nhất. Đồ gỗ thủ công chất lượng cao.">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://moctaisinh.vn">
  <meta property="og:site_name" content="Mộc Tái Sinh">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Cảm Ơn | Đặt Hàng Thành Công - Mộc Tái Sinh">
  <meta name="twitter:description" content="Cảm ơn bạn đã đặt hàng sản phẩm gỗ tái sinh. Chúng tôi sẽ giao hàng sớm nhất. Đồ gỗ thủ công chất lượng cao.">
  <link rel="canonical" href="https://moctaisinh.vn/thankyou.html">
		<!-- Bootstrap CSS -->
		<link href="css/bootstrap.min.css" rel="stylesheet">
		<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
		<link href="css/tiny-slider.css" rel="stylesheet">
		<link href="css/style.css" rel="stylesheet">
		<link href="css/thankyou.css" rel="stylesheet">
		<title>Cảm Ơn | Đặt Hàng Thành Công - Mộc Tái Sinh</title>
	</head>
	<body class="thankyou-page">
		<!-- Start Header/Navigation -->
		<nav class="custom-navbar navbar navbar navbar-expand-lg navbar-dark bg-dark" arial-label="Furni navigation bar" style="background: transparent !important; position: absolute; width: 100%; z-index: 10;">
			<div class="container">
				<a class="navbar-brand" href="index.html">moctaisinh<span>.</span>vn</a>
				<button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarsFurni" aria-controls="navbarsFurni" aria-expanded="false" aria-label="Toggle navigation">
					<span class="navbar-toggler-icon"></span>
				</button>
				<div class="collapse navbar-collapse" id="navbarsFurni">
					<ul class="custom-navbar-nav navbar-nav ms-auto mb-2 mb-md-0">
						<li class="nav-item"><a class="nav-link" href="index.html">Trang chủ</a></li>
						<li><a class="nav-link" href="shop.html">Sản phẩm</a></li>
						<li><a class="nav-link" href="about.html">Về chúng tôi</a></li>
						<li><a class="nav-link" href="services.html">Dịch vụ</a></li>
						<li><a class="nav-link" href="blog.html">Blog</a></li>
						<li><a class="nav-link" href="contact.html">Kết nối với chúng tôi</a></li>
					</ul>
					<ul class="custom-navbar-cta navbar-nav mb-2 mb-md-0 ms-5">
						<li><a class="nav-link" href="cart.html"><img src="images/cart.svg"></a></li>
					</ul>
				</div>
			</div>
		</nav>
		<!-- End Header/Navigation -->
		<!-- Start Hero Section -->
			<div class="hero" style="background: url('../images/hero-bg.jpg') center center/cover no-repeat; position: relative; min-height: 180px; padding: 2.5rem 0 2.5rem 0;">
				<div style="position: absolute; inset: 0; background: rgba(59,93,80,0.78); z-index: 1;"></div>
				<div class="container" style="position: relative; z-index: 2;">
					<div class="row justify-content-center">
						<div class="col-lg-8 text-center">
							<div class="intro-excerpt">
								<h1>Cảm ơn bạn đã đặt hàng!</h1>
								<p class="mb-4">Cảm ơn bạn đã đồng hành cùng Mộc Tái Sinh! Chúng tôi trân trọng từng lựa chọn, từng câu chuyện mà bạn cùng chúng tôi lan tỏa.<br></p>
							</div>
						</div>
					</div>
				</div>
			</div>
		<!-- End Hero Section -->
		<div class="untree_co-section" style="padding: 2rem 0 4rem 0;">
    <div class="container">
      <div class="row">
        <div class="col-md-12 text-center">
          <!-- Order Information -->
          <div class="order-info mt-5" id="orderInfo" style="display: none;">
            <div class="modern-order-card">
              <div class="order-header">
                <div class="order-header-icon">
                  <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                  </svg>
                </div>
                <h3>Thông tin đơn hàng</h3>
              </div>
              <div class="order-content">
                <div class="order-section">
                  <h4 class="section-title">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    Thông tin đơn hàng
                  </h4>
                  <div class="info-grid">
                    <div class="info-item">
                      <span class="info-label">Mã đơn hàng:</span>
                      <span class="info-value" id="orderId"></span>
                    </div>
                    <div class="info-item">
                      <span class="info-label">Ngày đặt:</span>
                      <span class="info-value" id="orderDate"></span>
                    </div>
                    <div class="info-item">
                      <span class="info-label">Tổng tiền:</span>
                      <span class="info-value total-amount" id="orderTotal"></span>
                    </div>
                  </div>
                </div>
                <div class="order-section">
                  <h4 class="section-title">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <path d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    Thông tin khách hàng
                  </h4>
                  <div class="customer-info" id="customerInfo">
                    <!-- Customer info will be populated here -->
                  </div>
                </div>
                <div class="order-section">
                  <h4 class="section-title">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <path d="M3 3h2l.4 2M7 13h10l4-8H5.4m0 0L7 13m0 0l-2.5 5M7 13l2.5 5m0 0h8m-8 0a2 2 0 100 4 2 2 0 000-4zm8 0a2 2 0 100 4 2 2 0 000-4z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    Sản phẩm đã đặt
                  </h4>
                  <div class="order-items" id="orderItems">
                    <!-- Order items will be populated here -->
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="text-center mt-4">
            <div class="button-group">
              <a href="shop.html" class="btn btn-sm btn-outline-black me-3">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" style="margin-right: 8px;">
                  <path d="M3 3h2l.4 2M7 13h10l4-8H5.4m0 0L7 13m0 0l-2.5 5M7 13l2.5 5m0 0h8m-8 0a2 2 0 100 4 2 2 0 000-4zm8 0a2 2 0 100 4 2 2 0 000-4z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
                Quay lại cửa hàng
              </a>
              <!-- Dropdown cho xuất hóa đơn -->
              <div class="dropdown d-inline-block">
                <button class="btn btn-sm btn-primary dropdown-toggle" type="button" id="invoiceDropdown" data-bs-toggle="dropdown" aria-expanded="false">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" style="margin-right: 8px;">
                    <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    <polyline points="14,2 14,8 20,8" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    <line x1="16" y1="13" x2="8" y2="13" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    <line x1="16" y1="17" x2="8" y2="17" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    <polyline points="10,9 9,9 8,9" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                  </svg>
                  Xuất hóa đơn
                </button>
                <ul class="dropdown-menu" aria-labelledby="invoiceDropdown">
                  <li><a class="dropdown-item" href="#" onclick="exportInvoiceExcel()">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" style="margin-right: 8px;">
                      <path d="M3 3h18v18H3z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                      <path d="M3 9h18" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                      <path d="M9 21V9" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    Xuất Excel
                  </a></li>
                  <li><a class="dropdown-item" href="#" onclick="printInvoice()">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" style="margin-right: 8px;">
                      <path d="M6 9V2a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v7" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                      <path d="M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                      <path d="M6 14h12v8H6z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    In hóa đơn
                  </a></li>
                </ul>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
		<!-- Footer will be loaded automatically from footer.html -->
		<div class="footer-section">
			<!-- Footer will be loaded automatically from footer.html -->
		</div>	
		<!-- Nút nổi Call & Zalo -->
		<style>
		.fab-contact {
		  position: fixed;
		  right: 24px;
		  bottom: 24px;
		  z-index: 9999;
		  display: flex;
		  flex-direction: column;
		  gap: 16px;
		}
		.fab-contact-btn {
		  width: 60px;
		  height: 60px;
		  border-radius: 100%;
		  background-color: #30C04F;
		  color: #fff;
		  display: flex;
		  align-items: center;
		  justify-content: center;
		  box-shadow: 0 4px 16px rgba(59,93,80,0.18);
		  font-size: 28px;
		  border: none;
		  outline: none;
		  cursor: pointer;
		  transition: background 0.2s;
		  animation: shakeFab 0.5s cubic-bezier(.36,.07,.19,.97) infinite;
		  animation-iteration-count: infinite;
		  animation-play-state: paused;
		}
		.fab-contact-btn.zalo-btn {
		.fab-contact-btn:hover {
		  background-color: #2bac47;
		  transform: scale(1.1);
		}		  background: #008fe5;
		  padding: 0;
		}
		.fab-contact-btn.zalo-btn img {
		.fab-contact-btn:hover {
		  background-color: #2bac47;
		  transform: scale(1.1);
		}		  width: 32px;
		  height: 32px;
		}
		@keyframes shakeFab {
		  0% { transform: translateX(0); }
		  10%, 30%, 50%, 70%, 90% { transform: translateX(-6px); }
		  20%, 40%, 60%, 80% { transform: translateX(6px); }
		  100% { transform: translateX(0); }
		}
		</style>
		<div class="fab-contact">
		  <a href="tel:0373566167" class="fab-contact-btn" id="callFab" title="Gọi điện" onclick="handleCallClick(event)"><svg xmlns="http://www.w3.org/2000/svg" width="32" viewBox="0 0 32 32" height="32" fill="none" class="svg-icon"><path stroke-width="2" stroke-linecap="round" stroke="#fff" fill-rule="evenodd" d="m24.8868 19.1288c-1.0274-.1308-2.036-.3815-3.0052-.7467-.7878-.29-1.6724-.1034-2.276.48-.797.8075-2.0493.9936-2.9664.3258-1.4484-1.055-2.7233-2.3295-3.7783-3.7776-.6681-.9168-.4819-2.1691.3255-2.9659.5728-.6019.7584-1.4748.4802-2.2577-.3987-.98875-.6792-2.02109-.8358-3.07557-.2043-1.03534-1.1138-1.7807-2.1694-1.77778h-3.18289c-.60654-.00074-1.18614.25037-1.60035.69334-.40152.44503-.59539 1.03943-.53345 1.63555.344 3.31056 1.47164 6.49166 3.28961 9.27986 1.64878 2.5904 3.84608 4.7872 6.43688 6.4356 2.7927 1.797 5.9636 2.9227 9.2644 3.289h.1778c.5409.0036 1.0626-.2 1.4581-.569.444-.406.6957-.9806.6935-1.5822v-3.1821c.0429-1.0763-.7171-2.0185-1.7782-2.2046z" clip-rule="evenodd"></path></svg></a>
		  <a href="https://zalo.me/0373566167" class="fab-contact-btn zalo-btn" id="zaloFab" title="Zalo" target="_blank"><img src="images/Icon_of_Zalo.png" alt="Zalo"></a>
		</div>
		<script>
		function loopShakeFab(btnId) {
		  var btn = document.getElementById(btnId);
		  if (!btn) return;
		  btn.style.cssText += `
			animation: modernShake 3s ease-in-out infinite;
			transform-origin: center;
		  `;
		  if (!document.getElementById('modernShakeKeyframes')) {
			const style = document.createElement('style');
			style.id = 'modernShakeKeyframes';
			style.textContent = `
			  @keyframes modernShake {
				0%, 100% { 
				  transform: rotate(0deg) scale(1); 
				  box-shadow: 0 4px 15px rgba(0,0,0,0.2);
				}
				10% { 
				  transform: rotate(-5deg) scale(1.05); 
				  box-shadow: 0 6px 20px rgba(0,0,0,0.3);
				}
				20% { 
				  transform: rotate(5deg) scale(1.1); 
				  box-shadow: 0 8px 25px rgba(0,0,0,0.4);
				}
				30% { 
				  transform: rotate(-3deg) scale(1.05); 
				  box-shadow: 0 6px 20px rgba(0,0,0,0.3);
				}
				40% { 
				  transform: rotate(3deg) scale(1.1); 
				  box-shadow: 0 8px 25px rgba(0,0,0,0.4);
				}
				50% { 
				  transform: rotate(-2deg) scale(1.05); 
				  box-shadow: 0 6px 20px rgba(0,0,0,0.3);
				}
				60% { 
				  transform: rotate(2deg) scale(1.1); 
				  box-shadow: 0 8px 25px rgba(0,0,0,0.4);
				}
				70% { 
				  transform: rotate(-1deg) scale(1.02); 
				  box-shadow: 0 4px 15px rgba(0,0,0,0.2);
				}
				80% { 
				  transform: rotate(1deg) scale(1.05); 
				  box-shadow: 0 6px 20px rgba(0,0,0,0.3);
				}
				90% { 
				  transform: rotate(0deg) scale(1.02); 
				  box-shadow: 0 4px 15px rgba(0,0,0,0.2);
				}
			  }
			`;
			document.head.appendChild(style);
		  }
		  btn.addEventListener('mouseenter', function() {
			this.style.animationPlayState = 'paused';
			this.style.transform = 'scale(1.2) rotate(5deg)';
			this.style.boxShadow = '0 10px 30px rgba(0,0,0,0.5)';
		  });
		  btn.addEventListener('mouseleave', function() {
			this.style.animationPlayState = 'running';
			this.style.transform = '';
			this.style.boxShadow = '';
		  });
		}
		loopShakeFab('callFab');
		loopShakeFab('zaloFab');
      function handleCallClick(event) {
        event.preventDefault();
        showCallPopup();
      }
      function showCallPopup() {
        const popup = document.createElement('div');
        popup.id = 'callPopup';
        popup.style.cssText = `
          position: fixed;
          inset: 0;
          z-index: 3000;
          display: flex;
          align-items: center;
          justify-content: center;
          background: rgba(0,0,0,0.5);
          backdrop-filter: blur(4px);
        `;
        const popupContent = document.createElement('div');
        popupContent.style.cssText = `
          background: white;
          border-radius: 16px;
          padding: 32px;
          text-align: center;
          max-width: 400px;
          width: 90%;
          box-shadow: 0 20px 60px rgba(0,0,0,0.3);
          animation: popupSlideIn 0.3s ease-out;
        `;
        popupContent.innerHTML = `
          <div style="margin-bottom: 24px;">
            <div style="width: 80px; height: 80px; background: #28a745; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 16px;">
              <svg width="40" height="40" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z" fill="white"/>
              </svg>
            </div>
            <h3 style="margin: 0 0 8px; color: #333; font-size: 24px; font-weight: 600;">Gọi điện tư vấn</h3>
            <p style="margin: 0; color: #666; font-size: 16px;">Bạn có muốn gọi điện đến hotline của chúng tôi không?</p>
          </div>
          <div style="font-size: 28px; font-weight: 700; color: #28a745; margin-bottom: 24px; letter-spacing: 2px;">
            0373 566 167
          </div>
          <div style="display: flex; gap: 12px; justify-content: center;">
            <button onclick="closeCallPopup()" style="
              padding: 12px 24px;
              border: 2px solid #ddd;
              background: white;
              color: #666;
              border-radius: 8px;
              font-size: 16px;
              font-weight: 600;
              cursor: pointer;
              transition: all 0.2s;
            " onmouseover="this.style.borderColor='#999'; this.style.color='#333'" onmouseout="this.style.borderColor='#ddd'; this.style.color='#666'">
              Hủy
            </button>
            <button onclick="makeCall()" style="
              padding: 12px 32px;
              border: none;
              background: #28a745;
              color: white;
              border-radius: 8px;
              font-size: 16px;
              font-weight: 600;
              cursor: pointer;
              transition: all 0.2s;
            " onmouseover="this.style.background='#218838'" onmouseout="this.style.background='#28a745'">
              Gọi ngay
            </button>
          </div>
        `;
        const style = document.createElement('style');
        style.textContent = `
          @keyframes popupSlideIn {
            from {
              opacity: 0;
              transform: scale(0.8) translateY(-20px);
            }
            to {
              opacity: 1;
              transform: scale(1) translateY(0);
            }
          }
          @keyframes popupSlideOut {
            from {
              opacity: 1;
              transform: scale(1) translateY(0);
            }
            to {
              opacity: 0;
              transform: scale(0.8) translateY(-20px);
            }
          }
        `;
        document.head.appendChild(style);
        popup.appendChild(popupContent);
        document.body.appendChild(popup);
        popup.addEventListener('click', function(e) {
          if (e.target === popup) {
            closeCallPopup();
          }
        });
        document.addEventListener('keydown', function(e) {
          if (e.key === 'Escape') {
            closeCallPopup();
          }
        });
      }
      function closeCallPopup() {
        const popup = document.getElementById('callPopup');
        if (popup) {
          popup.style.animation = 'popupSlideOut 0.2s ease-in';
          setTimeout(() => {
            document.body.removeChild(popup);
          }, 200);
        }
      }
      function makeCall() {
        const phoneNumber = '0373566167';
        const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
        if (isMobile) {
          window.location.href = 'tel:' + phoneNumber;
        } else {
          const link = document.createElement('a');
          link.href = 'tel:' + phoneNumber;
          link.style.display = 'none';
          document.body.appendChild(link);
          link.click();
          document.body.removeChild(link);
          showCallNotification('Đang mở ứng dụng gọi điện...');
        }
        closeCallPopup();
      }
    </script>
			<script src="js/bootstrap.bundle.min.js"></script>
	<script src="js/tiny-slider.js"></script>
	<script src="js/custom.js"></script>
	<script src="js/checkout-utils.js"></script>
		<script src="js/cart-guard.js"></script>
	<script>
		function formatCurrency(num) {
			if (typeof num === 'string') {
				num = num.replace(/[^\d]/g, '');
			}
			num = parseInt(num) || 0;
			return num.toLocaleString('vi-VN') + '₫';
		}
		document.addEventListener('DOMContentLoaded', async function() {
			if (!CartGuard.checkOrderAccess()) {
				return;
			}
			const urlParams = new URLSearchParams(window.location.search);
			const orderId = urlParams.get('orderId');
			const orders = JSON.parse(localStorage.getItem('orders') || '[]');
			const currentOrder = orders.find(order => order.orderId === orderId);
			if (currentOrder) {
				await displayOrderInfo(currentOrder);
			}
		});
		async function displayOrderInfo(order) {
			document.getElementById('orderInfo').style.display = 'block';
			document.getElementById('orderId').textContent = order.orderId;
			document.getElementById('orderDate').textContent = new Date(order.orderDate).toLocaleDateString('vi-VN');
			document.getElementById('orderTotal').textContent = formatCurrency(order.total);
			sendWebhookNotification(order);
			
			// Chờ addressConverter sẵn sàng và convert địa chỉ
			await addressConverter.waitForReady();
			const convertedOrder = addressConverter.convertOrderAddress(order);
			const customer = convertedOrder.customer;
			
			document.getElementById('customerInfo').innerHTML = `
				<div class="customer-details">
					<div class="customer-item">
						<span class="customer-label">Họ và tên:</span>
						<span class="customer-value">${customer.name}</span>
					</div>
					<div class="customer-item">
						<span class="customer-label">Số điện thoại:</span>
						<span class="customer-value">${customer.phone}</span>
					</div>
					<div class="customer-item">
						<span class="customer-label">Email:</span>
						<span class="customer-value">${customer.email || 'Không có'}</span>
					</div>
					<div class="customer-item">
						<span class="customer-label">Địa chỉ:</span>
						<span class="customer-value">${addressConverter.getFullAddress(customer)}</span>
					</div>
					${customer.note ? `
					<div class="customer-item note-item">
						<span class="customer-label">Ghi chú:</span>
						<span class="customer-value note">${customer.note}</span>
					</div>
					` : ''}
				</div>
			`;
			const orderItemsContainer = document.getElementById('orderItems');
			orderItemsContainer.innerHTML = '';
			order.items.forEach(item => {
				const itemDiv = document.createElement('div');
				itemDiv.className = 'order-item';
				itemDiv.innerHTML = `
					<div class="item-info">
						<span class="item-name">${item.name}</span>
						<span class="item-quantity">x${item.quantity}</span>
					</div>
					<span class="item-price">${formatCurrency(item.price)}</span>
				`;
				orderItemsContainer.appendChild(itemDiv);
			});
		}
		function formatCurrency(amount) {
			return new Intl.NumberFormat('vi-VN', {
				style: 'currency',
				currency: 'VND'
			}).format(amount);
		}
		function getCurrentOrder() {
			const urlParams = new URLSearchParams(window.location.search);
			const orderId = urlParams.get('orderId');
			const orders = JSON.parse(localStorage.getItem('orders') || '[]');
			const currentOrder = orders.find(order => order.orderId === orderId);
			if (!currentOrder) {
				alert('Không tìm thấy thông tin đơn hàng!');
				return null;
			}
			return currentOrder;
		}
		function showLoadingState(action) {
			const dropdownBtn = document.getElementById('invoiceDropdown');
			const originalText = dropdownBtn.innerHTML;
			dropdownBtn.innerHTML = `
				<svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" style="margin-right: 8px; animation: spin 1s linear infinite;">
					<path d="M12 2v6m0 0l3-3m-3 3l-3-3" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
				</svg>
				Đang ${action}...
			`;
			dropdownBtn.disabled = true;
			return originalText;
		}
		function resetLoadingState(originalText) {
			const dropdownBtn = document.getElementById('invoiceDropdown');
			dropdownBtn.innerHTML = originalText;
			dropdownBtn.disabled = false;
		}
		async function exportInvoiceExcel() {
			const currentOrder = getCurrentOrder();
			if (!currentOrder) return;
			const originalText = showLoadingState('tạo Excel');
			try {
				const success = await invoiceExporter.generateExcel(currentOrder);
				if (success) {
					showSuccessToast('Đã xuất hóa đơn Excel thành công!');
				} else {
					showErrorToast('Có lỗi xảy ra khi tạo Excel. Vui lòng thử lại!');
				}
			} catch (error) {
				showErrorToast('Có lỗi xảy ra khi tạo Excel. Vui lòng thử lại!');
			} finally {
				resetLoadingState(originalText);
			}
		}
		function printInvoice() {
			const currentOrder = getCurrentOrder();
			if (!currentOrder) return;
			const originalText = showLoadingState('chuẩn bị in');
			try {
				const success = invoiceExporter.printInvoice(currentOrder);
				if (success) {
					showSuccessToast('Đã mở cửa sổ in hóa đơn!');
				} else {
					showErrorToast('Có lỗi xảy ra khi in. Vui lòng thử lại!');
				}
			} catch (error) {
				showErrorToast('Có lỗi xảy ra khi in. Vui lòng thử lại!');
			} finally {
				resetLoadingState(originalText);
			}
		}
		function showSuccessToast(message) {
			const toast = document.createElement('div');
			toast.className = 'webhook-toast success';
			toast.innerHTML = `
				<div class="toast-content">
					<svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
						<path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
					</svg>
					<div class="toast-text">
						<span class="toast-title">${message}</span>
					</div>
				</div>
			`;
			document.body.appendChild(toast);
			setTimeout(() => {
				toast.classList.add('show');
			}, 100);
			setTimeout(() => {
				toast.classList.remove('show');
				setTimeout(() => {
					document.body.removeChild(toast);
				}, 300);
			}, 4000);
		}
		function showErrorToast(message) {
			const toast = document.createElement('div');
			toast.className = 'webhook-toast error';
			toast.innerHTML = `
				<div class="toast-content">
					<svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
						<path d="M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
					</svg>
					<div class="toast-text">
						<span class="toast-title">${message}</span>
					</div>
				</div>
			`;
			document.body.appendChild(toast);
			setTimeout(() => {
				toast.classList.add('show');
			}, 100);
			setTimeout(() => {
				toast.classList.remove('show');
				setTimeout(() => {
					document.body.removeChild(toast);
				}, 300);
			}, 4000);
		}
		async function sendWebhookNotification(orderData) {
			try {
				await addressConverter.waitForReady();
				const convertedOrderData = addressConverter.convertOrderAddress(orderData);
				const testWebhookUrl = 'https://2ada7f.n8nvps.site/webhook-test/new-order';
				const productionWebhookUrl = 'https://2ada7f.n8nvps.site/webhook/new-order';
				const adminTestWebhookUrl = 'https://2ada7f.n8nvps.site/webhook-test/admin-notification';
				const adminProductionWebhookUrl = 'https://2ada7f.n8nvps.site/webhook/admin-notification';
				const webhookData = {
					orderId: convertedOrderData.orderId,
					orderDate: new Date().toLocaleString('vi-VN'),
					customer: {
						name: convertedOrderData.customer.name,
						phone: convertedOrderData.customer.phone,
						email: convertedOrderData.customer.email || '',
						address: convertedOrderData.customer.address,
						province: convertedOrderData.customer.province,
						district: convertedOrderData.customer.district,
						ward: convertedOrderData.customer.ward,
						note: convertedOrderData.customer.note || ''
					},
					items: convertedOrderData.items,
					total: convertedOrderData.total,
					status: 'Chờ xử lý',
					notificationType: 'new_order',
					timestamp: new Date().toISOString(),
					source: 'thankyou_page'
				};
				const customerPromises = [
					sendSingleWebhook(testWebhookUrl, webhookData, 'CUSTOMER_TEST'),
					sendSingleWebhook(productionWebhookUrl, webhookData, 'CUSTOMER_PRODUCTION')
				];
				const adminWebhookData = {
					...webhookData,
					notificationType: 'admin_group_notification',
					adminMessage: `🆕 ĐƠN HÀNG MỚI: ${convertedOrderData.orderId}
👤 THÔNG TIN KHÁCH HÀNG:
• Họ và tên: ${convertedOrderData.customer?.name || 'Không có'}
• Số điện thoại: ${convertedOrderData.customer?.phone || 'Không có'}
• Email: ${convertedOrderData.customer?.email || 'Không có'}
📍 ĐỊA CHỈ GIAO HÀNG:
• Địa chỉ: ${convertedOrderData.customer?.address || 'Không có'}
• Phường/Xã: ${convertedOrderData.customer?.ward || 'Không có'}
• Quận/Huyện: ${convertedOrderData.customer?.district || 'Không có'}
• Tỉnh/Thành: ${convertedOrderData.customer?.province || 'Không có'}
🛒 SẢN PHẨM ĐÃ ĐẶT:
${(convertedOrderData.items || []).map(item => `• ${item.name || 'Sản phẩm'} (x${item.quantity || 1})`).join('\n')}
💰 TỔNG TIỀN: ${convertedOrderData.total || '0'} VND
📝 GHI CHÚ: ${convertedOrderData.customer?.note || 'Không có'}
📅 Thời gian đặt: ${new Date().toLocaleString('vi-VN')}
---
Trạng thái: Chờ xử lý
Nguồn: Website Mộc Tái Sinh`
				};
				const adminPromises = [
					sendSingleWebhook(adminTestWebhookUrl, adminWebhookData, 'ADMIN_TEST'),
					sendSingleWebhook(adminProductionWebhookUrl, adminWebhookData, 'ADMIN_PRODUCTION')
				];
				const allPromises = [...customerPromises, ...adminPromises];
				const results = await Promise.allSettled(allPromises);
				let customerSuccessCount = 0;
				let adminSuccessCount = 0;
				results.forEach((result, index) => {
					if (index < 2) {
						if (result.status === 'fulfilled' && result.value) {
							customerSuccessCount++;
						}
					} else {
						if (result.status === 'fulfilled' && result.value) {
							adminSuccessCount++;
						}
					}
				});
				if (customerSuccessCount > 0) {
					showWebhookSuccess();
				}
			} catch (error) {
			}
		}
		async function sendSingleWebhook(webhookUrl, webhookData, webhookType) {
			try {
				const response = await fetch(webhookUrl, {
					method: 'POST',
					headers: {
						'Content-Type': 'application/json',
					},
					body: JSON.stringify(webhookData)
				});
				return response.ok;
			} catch (error) {
				return false;
			}
		}
		function showWebhookSuccess() {
			const toast = document.createElement('div');
			toast.className = 'webhook-toast success';
			toast.innerHTML = `
				<div class="toast-content">
					<svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
						<path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
					</svg>
					<div class="toast-text">
						<span class="toast-title">Đã gửi thông báo xác nhận đơn hàng!</span>
					</div>
				</div>
			`;
			document.body.appendChild(toast);
			setTimeout(() => {
				toast.classList.add('show');
			}, 100);
			setTimeout(() => {
				toast.classList.remove('show');
				setTimeout(() => {
					document.body.removeChild(toast);
				}, 300);
			}, 6000);
		}
	</script>
	<script src="js/address-converter.js"></script>
	<script src="js/invoice-exporter.js"></script>
			<script src="js/footer-loader.js"></script>
		<script src="js/counter-animation.js"></script>
		<link href="css/background-music.css" rel="stylesheet">
		<script src="js/background-music.js"></script>
	</body>
</html>
